<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Japanese Learning</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            color: #334155; /* Darker text */
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1); /* Stronger shadow */
            padding: 24px;
            margin-bottom: 24px;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /* More pronounced shadow on hover */
        }
        .section-title {
            font-size: 2.5rem; /* text-5xl */
            font-weight: 800; /* font-extrabold */
            color: #1e3a8a; /* Dark blue */
            margin-bottom: 24px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .subsection-title {
            font-size: 1.75rem; /* text-3xl */
            font-weight: 700; /* font-bold */
            color: #3b82f6; /* Blue */
            margin-bottom: 16px;
            border-bottom: 3px solid #93c5fd; /* Light blue border */
            padding-bottom: 8px;
            text-align: center;
        }
        .btn {
            padding: 12px 28px; /* Larger padding */
            border-radius: 10px; /* More rounded */
            font-weight: 700; /* Bolder text */
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, transform 0.15s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Stronger button shadow */
            margin-top: 10px;
            background-image: linear-gradient(to right, var(--tw-gradient-stops));
        }
        .btn-primary {
            --tw-gradient-from: #3b82f6;
            --tw-gradient-to: #2563eb;
            color: #ffffff;
        }
        .btn-primary:hover {
            --tw-gradient-from: #2563eb;
            --tw-gradient-to: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        .btn-secondary {
            --tw-gradient-from: #60a5fa;
            --tw-gradient-to: #3b82f6;
            color: #ffffff;
        }
        .btn-secondary:hover {
            --tw-gradient-from: #3b82f6;
            --tw-gradient-to: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        .input-field {
            border: 2px solid #94a3b8; /* Stronger border */
            border-radius: 10px; /* More rounded */
            padding: 12px; /* Larger padding */
            width: 100%;
            max-width: 350px; /* Slightly wider */
            margin-top: 8px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.08);
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6; /* Blue focus border */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.08), 0 0 0 3px rgba(59, 130, 246, 0.25); /* Focus ring */
        }
        .feedback {
            margin-top: 15px; /* More space */
            padding: 12px 18px; /* Larger padding */
            border-radius: 10px; /* More rounded */
            font-weight: 700; /* Bolder */
            display: flex;
            align-items: center;
            gap: 10px;
            animation: fadeIn 0.3s ease-out;
        }
        .feedback.correct {
            background-color: #d1fae5; /* Green-100 */
            color: #065f46; /* Green-700 */
            border: 1px solid #34d399; /* Green-400 border */
        }
        .feedback.incorrect {
            background-color: #fee2e2; /* Red-100 */
            color: #b91c1c; /* Red-700 */
            border: 1px solid #f87171; /* Red-400 border */
        }
        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        @media (max-width: 768px) {
            .grid-cols-2 {
                grid-template-columns: 1fr;
            }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .score-display {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e3a8a;
            text-align: right;
            margin-bottom: 1rem;
        }
        .question-progress {
            font-size: 1rem;
            color: #475569;
            margin-bottom: 1rem;
            text-align: center;
        }
    </style>
</head>
<body class="p-4">
    <div class="container">
        <div class="flex justify-between items-center mb-8">
            <h1 class="section-title flex-grow">Interactive Japanese Learning App</h1>
            <div class="score-display">Score: <span id="current-score">0</span></div>
        </div>

        <!-- Navigation -->
        <nav class="mb-8 p-4 bg-blue-100 rounded-lg shadow-md">
            <ul class="flex flex-wrap justify-center gap-4">
                <li><a href="#greetings" class="text-blue-700 hover:text-blue-900 font-semibold">Greetings</a></li>
                <li><a href="#adjectives" class="text-blue-700 hover:text-blue-900 font-semibold">Adjectives</a></li>
                <li><a href="#body-parts" class="text-blue-700 hover:text-blue-900 font-semibold">Body Parts</a></li>
                <li><a href="#verbs" class="text-blue-700 hover:text-blue-900 font-semibold">Verbs</a></li>
                <li><a href="#existence" class="text-blue-700 hover:text-blue-900 font-semibold">Existence</a></li>
                <li><a href="#colors" class="text-blue-700 hover:text-blue-900 font-semibold">Colors</a></li>
                <li><a href="#family" class="text-blue-700 hover:text-blue-900 font-semibold">Family</a></li>
                <li><a href="#daily-expressions" class="text-blue-700 hover:text-blue-900 font-semibold">Daily Expressions</a></li>
                <li><a href="#demonstratives" class="text-blue-700 hover:text-blue-900 font-semibold">Demonstratives</a></li>
                <li><a href="#kanji-numbers" class="text-blue-700 hover:text-blue-900 font-semibold">Kanji Numbers</a></li>
                <li><a href="#days" class="text-blue-700 hover:text-blue-900 font-semibold">Days</a></li>
                <li><a href="#food" class="text-blue-700 hover:text-blue-900 font-semibold">Food</a></li>
                <li><a href="#vocabulary" class="text-blue-700 hover:text-blue-900 font-semibold">Vocabulary</a></li>
                <li><a href="#particles" class="text-blue-700 hover:text-blue-900 font-semibold">Particles</a></li>
                <li><a href="#hiragana" class="text-blue-700 hover:text-blue-900 font-semibold">Hiragana</a></li>
            </ul>
        </nav>

        <!-- Greetings Section -->
        <section id="greetings" class="card">
            <h2 class="subsection-title">1. Japanese Greetings</h2>
            <p id="greeting-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="greeting-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="greeting-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-greeting-btn" class="btn btn-primary">Check Answer</button>
                <div id="greeting-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-greeting-btn" class="btn btn-secondary mt-4">Next Greeting</button>
            </div>
        </section>

        <!-- Adjectives Section -->
        <section id="adjectives" class="card">
            <h2 class="subsection-title">2. na & 3. i Adjectives</h2>
            <p id="adjective-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="adjective-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="adjective-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-adjective-btn" class="btn btn-primary">Check Answer</button>
                <div id="adjective-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-adjective-btn" class="btn btn-secondary mt-4">Next Adjective</button>
            </div>
        </section>

        <!-- Body Parts Section -->
        <section id="body-parts" class="card">
            <h2 class="subsection-title">4. Body Parts</h2>
            <p id="bodypart-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="bodypart-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="bodypart-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-bodypart-btn" class="btn btn-primary">Check Answer</button>
                <div id="bodypart-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-bodypart-btn" class="btn btn-secondary mt-4">Next Body Part</button>
            </div>
        </section>

        <!-- Verbs & Conjugation Section -->
        <section id="verbs" class="card">
            <h2 class="subsection-title">5. Japanese Verbs & 6. Conjugation</h2>
            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Verb List:</h3>
                <ul id="verb-list" class="list-disc list-inside grid grid-cols-2 sm:grid-cols-3 gap-2"></ul>
            </div>

            <h3 class="text-xl font-semibold text-gray-700 mb-4">Conjugation Exercise:</h3>
            <p id="conjugation-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="conjugation-verb-casual" class="text-2xl font-bold text-blue-800 mb-4">Verb: <span id="current-casual-verb"></span></p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-1">Present (masu):</label>
                        <input type="text" id="verb-masu" class="input-field" placeholder="e.g., tabemasu">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-1">Present Negative (masen):</label>
                        <input type="text" id="verb-masen" class="input-field" placeholder="e.g., tabemasen">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-1">Past (mashita):</label>
                        <input type="text" id="verb-mashita" class="input-field" placeholder="e.g., tabemashita">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-1">Past Negative (masen deshita):</label>
                        <input type="text" id="verb-masen-deshita" class="input-field" placeholder="e.g., tabemasendeshita">
                    </div>
                </div>
                <button id="check-conjugation-btn" class="btn btn-primary mt-6">Check Answers</button>
                <div id="conjugation-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-conjugation-btn" class="btn btn-secondary mt-4">Next Verb</button>
            </div>
        </section>

        <!-- Existence Section -->
        <section id="existence" class="card">
            <h2 class="subsection-title">7. Existence (aru/iru)</h2>
            <p id="existence-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="existence-sentence" class="text-xl text-gray-700 mb-4"></p>
                <select id="existence-answer" class="input-field mb-4">
                    <option value="">Select an option</option>
                    <option value="arimasu">arimasu</option>
                    <option value="arimasen">arimasen</option>
                    <option value="arimashita">arimashita</option>
                    <option value="arimasen deshita">arimasen deshita</option>
                    <option value="imasu">imasu</option>
                    <option value="imasen">imasen</option>
                    <option value="imashita">imashita</option>
                    <option value="imasen deshita">imasen deshita</option>
                </select>
                <button id="check-existence-btn" class="btn btn-primary">Check Answer</button>
                <div id="existence-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-existence-btn" class="btn btn-secondary mt-4">Next Exercise</button>
            </div>
        </section>

        <!-- Colors Section -->
        <section id="colors" class="card">
            <h2 class="subsection-title">8. Colors in Japanese</h2>
            <p id="color-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="color-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="color-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-color-btn" class="btn btn-primary">Check Answer</button>
                <div id="color-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-color-btn" class="btn btn-secondary mt-4">Next Color</button>
            </div>
        </section>

        <!-- Family Members Section -->
        <section id="family" class="card">
            <h2 class="subsection-title">9. Family Members</h2>
            <p id="family-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="family-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="family-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-family-btn" class="btn btn-primary">Check Answer</button>
                <div id="family-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-family-btn" class="btn btn-secondary mt-4">Next Member</button>
            </div>
        </section>

        <!-- Daily Expressions Section -->
        <section id="daily-expressions" class="card">
            <h2 class="subsection-title">10. Daily Expressions</h2>
            <p id="expression-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="expression-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="expression-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-expression-btn" class="btn btn-primary">Check Answer</button>
                <div id="expression-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-expression-btn" class="btn btn-secondary mt-4">Next Expression</button>
            </div>
        </section>

        <!-- Demonstratives Section -->
        <section id="demonstratives" class="card">
            <h2 class="subsection-title">11. Sore, Kore, Sono, kono, ano</h2>
            <p id="demonstrative-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="demonstrative-sentence" class="text-xl text-gray-700 mb-4"></p>
                <input type="text" id="demonstrative-input" class="input-field mb-4" placeholder="Type the demonstrative (e.g., Kore)">
                <button id="check-demonstrative-btn" class="btn btn-primary">Check Answer</button>
                <div id="demonstrative-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-demonstrative-btn" class="btn btn-secondary mt-4">Next Exercise</button>
            </div>
        </section>

        <!-- Self-Introduction Section -->
        <section id="self-introduction" class="card">
            <h2 class="subsection-title">12. Introduce yourself in Japanese</h2>
            <div class="text-lg text-gray-700 leading-relaxed mb-4">
                <p><strong>Hajimemashite</strong> (How do you do)</p>
                <p><strong>Watashi no namae wa [Your Name] desu.</strong> (My name is [Your Name])</p>
                <p><strong>Mangaruuru kara kimashita.</strong> (I am from Mangalore)</p>
                <p><strong>Nitte daigaku no kougaku-bu no gakusei desu.</strong> (I am a student of the engineering dept. of Nitte University)</p>
                <p><strong>Senkou wa [Your Major] desu</strong> (Major is [Your Major])</p>
                <p><strong>Watashi no kazoku wa roku-nin de ryoushin to sofu to sobo to ane to watashi desu.</strong> (We are 6 members in family. And my parents, grandfather, grandmother, elder sister and me)</p>
                <p><strong>Ni juu issai desu.</strong> (I am 21 yr old)</p>
                <p><strong>Ima nihongo o benkyou shite imasu.</strong> (Now I am studying Japanese)</p>
                <p><strong>Douzo yoroshiku onegai shimasu.</strong> (Nice to meet you)</p>
                <p class="mt-4 text-sm text-gray-500">
                    *Replace [Your Name] and [Your Major] with your actual information.*
                </p>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Practice Your Self-Introduction:</h3>
            <textarea id="self-intro-practice" class="input-field w-full max-w-none h-32" placeholder="Type your self-introduction here..."></textarea>
        </section>

        <!-- Kanji Numbers Section -->
        <section id="kanji-numbers" class="card">
            <h2 class="subsection-title">13. Kanji from 1 to 10000</h2>
            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Basic Kanji Numbers:</h3>
                <ul class="list-disc list-inside grid grid-cols-2 sm:grid-cols-3 gap-2">
                    <li>一 (ichi) - 1</li>
                    <li>二 (ni) - 2</li>
                    <li>Ξ (san) - 3</li>
                    <li>四 (yon / shi) - 4</li>
                    <li>$\hbar$ (go) - 5</li>
                    <li>六 (roku) - 6</li>
                    <li>七 (nana / shichi) - 7</li>
                    <li>$\pi$ (hachi) - 8</li>
                    <li>$\pm$ (kyuu / ku) - 9</li>
                    <li>$+$ (juu) - 10</li>
                    <li>百 (Hyaku) - 100</li>
                    <li>千 (Sen) - 1000</li>
                    <li>万 (man) - 10000</li>
                </ul>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Number Conversion Exercise:</h3>
            <p id="kanji-number-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="number-to-convert" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="kanji-number-input" class="input-field mb-4" placeholder="Type in Japanese Romaji">
                <button id="check-kanji-number-btn" class="btn btn-primary">Check Answer</button>
                <div id="kanji-number-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-kanji-number-btn" class="btn btn-secondary mt-4">Next Number</button>
            </div>
        </section>

        <!-- Days Section -->
        <section id="days" class="card">
            <h2 class="subsection-title">14. Weekly Days & 15. Monthly Days</h2>
            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Weekly Days:</h3>
                <ul class="list-disc list-inside grid grid-cols-2 sm:grid-cols-3 gap-2">
                    <li>月曜日 (getsuyoubi) - Monday</li>
                    <li>火曜日 (kayoubi) - Tuesday</li>
                    <li>水曜日 (suiyoubi) - Wednesday</li>
                    <li>木曜日 (mokuyoubi) - Thursday</li>
                    <li>金曜日 (kinyoubi) - Friday</li>
                    <li>土曜日 (doyoubi) - Saturday</li>
                    <li>日曜日 (nichiyoubi) - Sunday</li>
                </ul>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Weekly Day Exercise:</h3>
            <p id="weekly-day-progress" class="question-progress"></p>
            <div class="flex flex-col items-center mb-6">
                <p id="weekly-day-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="weekly-day-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-weekly-day-btn" class="btn btn-primary">Check Answer</button>
                <div id="weekly-day-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-weekly-day-btn" class="btn btn-secondary mt-4">Next Day</button>
            </div>

            <div>
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Monthly Days:</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                        <thead>
                            <tr class="bg-blue-50">
                                <th class="py-2 px-4 border-b text-left text-sm font-semibold text-gray-600">Date</th>
                                <th class="py-2 px-4 border-b text-left text-sm font-semibold text-gray-600">Romaji</th>
                            </tr>
                        </thead>
                        <tbody id="monthly-days-table-body">
                            <!-- Monthly days will be inserted here by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-4">Date Conversion Exercise:</h3>
            <p id="date-conversion-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="date-conversion-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="date-conversion-answer" class="input-field mb-4" placeholder="Type Japanese (Romaji) here">
                <button id="check-date-conversion-btn" class="btn btn-primary">Check Answer</button>
                <div id="date-conversion-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-date-conversion-btn" class="btn btn-secondary mt-4">Next Date</button>
            </div>
        </section>

        <!-- Food Items Section -->
        <section id="food" class="card">
            <h2 class="subsection-title">16. Food Items</h2>
            <p id="food-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="food-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="food-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-food-btn" class="btn btn-primary">Check Answer</button>
                <div id="food-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-food-btn" class="btn btn-secondary mt-4">Next Food Item</button>
            </div>
        </section>

        <!-- Vocabulary Section -->
        <section id="vocabulary" class="card">
            <h2 class="subsection-title">17. Vocabulary</h2>
            <p id="vocabulary-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="vocabulary-question" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="vocabulary-answer" class="input-field mb-4" placeholder="Type English here">
                <button id="check-vocabulary-btn" class="btn btn-primary">Check Answer</button>
                <div id="vocabulary-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-vocabulary-btn" class="btn btn-secondary mt-4">Next Word</button>
            </div>
        </section>

        <!-- Particles Section -->
        <section id="particles" class="card">
            <h2 class="subsection-title">18. Particle Explanation with Examples.</h2>
            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Particle Explanations:</h3>
                <ul class="list-disc list-inside text-gray-700">
                    <li><strong>wa Particle:</strong> Topic maker. Used after subject/noun.</li>
                    <li><strong>no Particle:</strong> "of", "'s". Indicates belonging. Connects two nouns.</li>
                    <li><strong>ka Particle:</strong> Forms a question at the end of a sentence.</li>
                    <li><strong>kara Particle:</strong> Indicates starting time or place.</li>
                    <li><strong>made Particle:</strong> Indicates finishing time or place. Usage: N1 kara N2 made.</li>
                    <li><strong>ni Particle:</strong> Indicates place or time (after place). Usage: N ni V.</li>
                    <li><strong>e Particle:</strong> Direction or destination particle for movement verbs. Can be replaced by "ni".</li>
                    <li><strong>to Particle:</strong> "And" (connects nouns), "With" (doing something together). Usage: N1 to N2.</li>
                    <li><strong>ga Particle:</strong> Object of some verbs (like, dislike, want). Tells who/what performs action.</li>
                    <li><strong>de Particle:</strong> Indicates location of action, means/method.</li>
                    <li><strong>o Particle:</strong> Indicates the object of verb. Used after verb.</li>
                    <li><strong>mo Particle:</strong> "also" or "too".</li>
                </ul>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Particle Exercise:</h3>
            <p id="particle-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="particle-sentence" class="text-xl text-gray-700 mb-4"></p>
                <input type="text" id="particle-input" class="input-field mb-4" placeholder="Type the particle (e.g., wa)">
                <button id="check-particle-btn" class="btn btn-primary">Check Answer</button>
                <div id="particle-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-particle-btn" class="btn btn-secondary mt-4">Next Exercise</button>
            </div>
        </section>

        <!-- Hiragana Section -->
        <section id="hiragana" class="card">
            <h2 class="subsection-title">19. Hiragana with Romaji</h2>
            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-2">Hiragana Chart:</h3>
                <div class="grid grid-cols-5 gap-2 text-center text-lg font-mono">
                    <div class="font-bold text-blue-700">あ (a)</div><div class="font-bold text-blue-700">い (i)</div><div class="font-bold text-blue-700">う (u)</div><div class="font-bold text-blue-700">え (e)</div><div class="font-bold text-blue-700">お (o)</div>
                    <div>か (ka)</div><div>き (ki)</div><div>く (ku)</div><div>け (ke)</div><div>こ (ko)</div>
                    <div>さ (sa)</div><div>し (shi)</div><div>す (su)</div><div>せ (se)</div><div>そ (so)</div>
                    <div>た (ta)</div><div>ち (chi)</div><div>つ (tsu)</div><div>て (te)</div><div>と (to)</div>
                    <div>な (na)</div><div>に (ni)</div><div>ぬ (nu)</div><div>ね (ne)</div><div>の (no)</div>
                    <div>は (ha)</div><div>ひ (hi)</div><div>ふ (fu)</div><div>へ (he)</div><div>ほ (ho)</div>
                    <div>ま (ma)</div><div>み (mi)</div><div>む (mu)</div><div>め (me)</div><div>も (mo)</div>
                    <div>や (ya)</div><div></div><div>ゆ (yu)</div><div></div><div>よ (yo)</div>
                    <div>ら (ra)</div><div>り (ri)</div><div>る (ru)</div><div>れ (re)</div><div>ろ (ro)</div>
                    <div>わ (wa)</div><div></div><div></div><div></div><div>を (o)</div>
                    <div>ん (n)</div><div></div><div></div><div></div><div></div>
                </div>
                <h3 class="text-xl font-semibold text-gray-700 mt-6 mb-2">Combined Sounds:</h3>
                <div class="grid grid-cols-3 gap-2 text-center text-lg font-mono">
                    <div>きゃ (kya)</div><div>きゅ (kyu)</div><div>きょ (kyo)</div>
                    <div>ぎゃ (gya)</div><div>ぎゅ (gyu)</div><div>ぎょ (gyo)</div>
                    <div>しゃ (sha)</div><div>しゅ (shu)</div><div>しょ (sho)</div>
                    <div>じゃ (ja)</div><div>じゅ (ju)</div><div>じょ (jo)</div>
                    <div>ちゃ (cha)</div><div>ちゅ (chu)</div><div>ちょ (cho)</div>
                    <div>にゃ (nya)</div><div>にゅ (nyu)</div><div>にょ (nyo)</div>
                    <div>ひゃ (hya)</div><div>ひゅ (hyu)</div><div>ひょ (hyo)</div>
                    <div>びゃ (bya)</div><div>びゅ (byu)</div><div>びょ (byo)</div>
                    <div>ぴゃ (pya)</div><div>ぴゅ (pyu)</div><div>ぴょ (pyo)</div>
                    <div>みゃ (mya)</div><div>みゅ (myu)</div><div>みょ (myo)</div>
                    <div>りゃ (rya)</div><div>りゅ (ryu)</div><div>りょ (ryo)</div>
                </div>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-4">Hiragana to Romaji Exercise:</h3>
            <p id="hiragana-progress" class="question-progress"></p>
            <div class="flex flex-col items-center">
                <p id="hiragana-word" class="text-3xl font-bold text-blue-800 mb-4"></p>
                <input type="text" id="romaji-input" class="input-field mb-4" placeholder="Type Romaji">
                <button id="check-romaji-btn" class="btn btn-primary">Check Answer</button>
                <div id="romaji-feedback" class="feedback mt-4 w-full max-w-lg"></div>
                <button id="next-romaji-btn" class="btn btn-secondary mt-4">Next Word</button>
            </div>
        </section>

    </div>

    <script>
        // Global score
        let score = 0;
        const scoreDisplay = document.getElementById('current-score');

        // Helper function to shuffle an array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Generic Quiz Logic
        function setupQuiz(data, questionElId, answerInputId, feedbackElId, checkBtnId, nextBtnId, progressElId, questionType = 'japanese-to-english') {
            let currentIndex = 0;
            let shuffledData = shuffleArray([...data]);

            const questionEl = document.getElementById(questionElId);
            const answerInput = document.getElementById(answerInputId);
            const feedbackEl = document.getElementById(feedbackElId);
            const checkBtn = document.getElementById(checkBtnId);
            const nextBtn = document.getElementById(nextBtnId);
            const progressEl = document.getElementById(progressElId);

            function updateProgress() {
                progressEl.textContent = `Question ${currentIndex + 1} of ${shuffledData.length}`;
            }

            function displayQuestion() {
                const item = shuffledData[currentIndex];
                if (questionType === 'japanese-to-english') {
                    questionEl.textContent = item.japanese;
                    answerInput.placeholder = 'Type English here';
                } else if (questionType === 'english-to-japanese') {
                    questionEl.textContent = item.english;
                    answerInput.placeholder = 'Type Japanese (Romaji) here';
                } else if (questionType === 'number-to-japanese') {
                    questionEl.textContent = item.number;
                    answerInput.placeholder = 'Type Japanese (Romaji) here';
                } else if (questionType === 'hiragana-to-romaji') {
                    questionEl.textContent = item.hiragana;
                    answerInput.placeholder = 'Type Romaji here';
                } else if (questionType === 'date-to-japanese') {
                    questionEl.textContent = item.question;
                    answerInput.placeholder = 'Type Japanese (Romaji) here';
                } else if (questionType === 'fill-in-the-blank') {
                    questionEl.textContent = item.sentence;
                    answerInput.placeholder = 'Type the particle(s) (comma-separated)';
                }


                answerInput.value = '';
                feedbackEl.textContent = '';
                feedbackEl.classList.remove('correct', 'incorrect');
                updateProgress();
            }

            checkBtn.addEventListener('click', () => {
                const item = shuffledData[currentIndex];
                const userAnswer = answerInput.value.toLowerCase().trim();
                let correctAnswer;
                let isCorrect = false;

                if (questionType === 'japanese-to-english') {
                    correctAnswer = item.english.toLowerCase().trim();
                    isCorrect = (userAnswer === correctAnswer);
                } else if (questionType === 'english-to-japanese' || questionType === 'number-to-japanese' || questionType === 'hiragana-to-romaji' || questionType === 'date-to-japanese') {
                    correctAnswer = item.japanese.toLowerCase().trim();
                    isCorrect = (userAnswer === correctAnswer);
                } else if (questionType === 'fill-in-the-blank') {
                    const userAnswers = userAnswer.split(',').map(s => s.trim());
                    const correctAnswers = item.correct.toLowerCase().split(',').map(s => s.trim());

                    if (userAnswers.length !== correctAnswers.length) {
                        isCorrect = false;
                    } else {
                        isCorrect = true;
                        for (let i = 0; i < correctAnswers.length; i++) {
                            if ((correctAnswers[i] === 'e' || correctAnswers[i] === 'ni') && (userAnswers[i] === 'e' || userAnswers[i] === 'ni')) {
                                continue; // Allow 'e' or 'ni' for direction particles
                            }
                            if (userAnswers[i] !== correctAnswers[i]) {
                                isCorrect = false;
                                break;
                            }
                        }
                    }
                }

                if (isCorrect) {
                    feedbackEl.innerHTML = '<i class="fas fa-check-circle"></i> Correct!';
                    feedbackEl.classList.remove('incorrect');
                    feedbackEl.classList.add('correct');
                    score++;
                    scoreDisplay.textContent = score;
                } else {
                    feedbackEl.innerHTML = `<i class="fas fa-times-circle"></i> Incorrect. Correct is "${correctAnswer || item.correct}".`;
                    feedbackEl.classList.remove('correct');
                    feedbackEl.classList.add('incorrect');
                }
            });

            nextBtn.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % shuffledData.length;
                displayQuestion();
            });

            displayQuestion(); // Initial display
        }

        // Data for sections (unchanged from previous version)
        const greetingsData = [
            { japanese: 'Konnichiwa', english: 'hello / hi' },
            { japanese: 'Ohayou gozaimasu', english: 'good morning' },
            { japanese: 'Arigatou gozaimasu', english: 'thank you very much' },
            { japanese: 'Sumimasen', english: 'excuse me' },
            { japanese: 'Ja mata', english: 'see you' },
            { japanese: 'Oyasumi nasai', english: 'good night' },
            { japanese: 'Douitashi mashite', english: 'you are welcome' },
            { japanese: 'Gomen-nasai', english: 'sorry' },
            { japanese: 'Hajimemashite', english: 'how do you do' },
            { japanese: 'Konbanwa', english: 'good evening' }
        ];

        const adjectivesData = [
            { japanese: 'genki', english: 'healthy / energetic / cheerful' },
            { japanese: 'hima', english: 'free (not busy)' },
            { japanese: 'benri', english: 'convenient' },
            { japanese: 'suteki', english: 'lovely / wonderful / nice' },
            { japanese: 'suki', english: 'like' },
            { japanese: 'kirai', english: 'dislike/hate' },
            { japanese: 'jouzu', english: 'skillful / good at' },
            { japanese: 'shizuka', english: 'quiet' },
            { japanese: 'nigiyaka', english: 'lively' },
            { japanese: 'heta', english: 'unskillful / poor at' },
            { japanese: 'kirei', english: 'beautiful' },
            { japanese: 'furui', english: 'old' },
            { japanese: 'ii', english: 'good' },
            { japanese: 'warui', english: 'bad' },
            { japanese: 'atsui', english: 'hot' },
            { japanese: 'samui', english: 'cold' },
            { japanese: 'takai', english: 'costly' },
            { japanese: 'yasui', english: 'cheap' },
            { japanese: 'ooki', english: 'big' },
            { japanese: 'chiisai', english: 'small' },
            { japanese: 'isogashii', english: 'busy' },
            { japanese: 'tanoshii', english: 'enjoyable' }
        ];

        const bodyPartsData = [
            { japanese: 'atama', english: 'head' },
            { japanese: 'kao', english: 'face' },
            { japanese: 'mimi', english: 'ear' },
            { japanese: 'me', english: 'eye' },
            { japanese: 'kuchi', english: 'mouth' },
            { japanese: 'ha', english: 'teeth' },
            { japanese: 'kubi', english: 'neck' },
            { japanese: 'kata', english: 'shoulder' },
            { japanese: 'te', english: 'hand' },
            { japanese: 'yubi', english: 'finger' },
            { japanese: 'onaka', english: 'stomach' },
            { japanese: 'ashi', english: 'leg' },
            { japanese: 'shinzou', english: 'heart' }
        ];

        const colorsData = [
            { japanese: 'aka', english: 'red' },
            { japanese: 'shiro', english: 'white' },
            { japanese: 'kuro', english: 'black' },
            { japanese: 'ao', english: 'blue' },
            { japanese: 'midori', english: 'green' },
            { japanese: 'kin', english: 'gold' },
            { japanese: 'gin', english: 'silver' },
            { japanese: 'ki', english: 'yellow' },
            { japanese: 'mizu-iro', english: 'light blue' },
            { japanese: 'pinku', english: 'pink' },
            { japanese: 'kuriimu-iro', english: 'cream color' }
        ];

        const familyData = [
            { japanese: 'chichi', english: 'father' },
            { japanese: 'haha', english: 'mother' },
            { japanese: 'ani', english: 'older brother' },
            { japanese: 'ane', english: 'older sister' },
            { japanese: 'otouto', english: 'younger brother' },
            { japanese: 'imouto', english: 'younger sister' },
            { japanese: 'ojii san', english: 'grandfather' },
            { japanese: 'obaa san', english: 'grandmother' },
            { japanese: 'ojisan', english: 'uncle' },
            { japanese: 'obasan', english: 'aunt' }
        ];

        const dailyExpressionsData = [
            { japanese: 'Tadaima', english: "i'm home" },
            { japanese: 'Okaerinasai', english: 'welcome back' },
            { japanese: 'Itte kimasu', english: "i'm leaving" },
            { japanese: 'Itte rasshai', english: 'please go and come back' },
            { japanese: 'Bikkurishimashita', english: 'i was surprised' },
            { japanese: 'Wakarimashita', english: 'i understood' },
            { japanese: 'Wakarimasen', english: "i don't understand" },
            { japanese: 'Yoku ganbarimashita', english: 'you did well' },
            { japanese: 'Wasuremashita', english: 'i forgot' },
            { japanese: 'Waratte kudasai', english: 'please smile' }
        ];

        const foodData = [
            { japanese: 'onigiri', english: 'rice with pickle' },
            { japanese: 'mikan', english: 'mandarin orange' },
            { japanese: 'kome', english: 'uncooked rice' },
            { japanese: 'shio', english: 'salt' },
            { japanese: 'satou', english: 'sugar' },
            { japanese: 'su', english: 'vinegar' },
            { japanese: 'bataa', english: 'butter' },
            { japanese: 'chiizu', english: 'cheese' },
            { japanese: 'yasai', english: 'vegetables' },
            { japanese: 'okura', english: 'okra' },
            { japanese: 'sakana', english: 'fish' },
            { japanese: 'tamago', english: 'egg' },
            { japanese: 'ame', english: 'candy' },
            { japanese: 'okashi', english: 'sweet' },
            { japanese: 'mochi', english: 'rice cake' },
            { japanese: 'sake', english: 'japanese rice wine' },
            { japanese: 'biiru', english: 'beer' },
            { japanese: 'niku', english: 'meat' },
            { japanese: 'tori niku', english: 'chicken' }
        ];

        const vocabularyData = [
            { japanese: 'jisho', english: 'dictionary' },
            { japanese: 'douzo', english: 'please' },
            { japanese: 'hana', english: 'flowers' },
            { japanese: 'tsukue', english: 'desk' },
            { japanese: 'juusu', english: 'juice' },
            { japanese: 'mizu', english: 'water' },
            { japanese: 'chokoreeto', english: 'chocolate' },
            { japanese: 'hito', english: 'person' },
            { japanese: 'takushii', english: 'taxi' },
            { japanese: 'denwa', english: 'telephone' },
            { japanese: 'kamera', english: 'camera' },
            { japanese: 'gakusei', english: 'student' },
            { japanese: 'kami', english: 'paper' },
            { japanese: 'basho', english: 'place' },
            { japanese: 'daigaku', english: 'university' },
            { japanese: 'hon', english: 'book' },
            { japanese: 'tori', english: 'bird' },
            { japanese: 'indo', english: 'india' },
            { japanese: 'gakkou', english: 'school' },
            { japanese: 'neko', english: 'cat' },
            { japanese: 'eki', english: 'station' },
            { japanese: 'miseru', english: 'to show' },
            { japanese: 'kuruma', english: 'car' },
            { japanese: 'sensei', english: 'teacher' },
            { japanese: 'nihon', english: 'japan' },
            { japanese: 'furansu', english: 'france' },
            { japanese: 'densha', english: 'train' },
            { japanese: 'kaze', english: 'wind' },
            { japanese: 'isu', english: 'chair' },
            { japanese: 'tomodachi', english: 'friend' },
            { japanese: 'kagi', english: 'key' },
            { japanese: 'shinbun', english: 'newspaper' },
            { japanese: 'kutsu', english: 'shoes' },
            { japanese: 'ikura', english: 'how much' },
            { japanese: 'kudasai', english: 'please give' },
            { japanese: 'terebi', english: 'television' }
        ];

        // Verb Conjugation Data
        const verbsData = [
            { casual: 'taberu', english: 'eat', masu: 'tabemasu', masen: 'tabemasen', mashita: 'tabemashita', masenDeshita: 'tabemasendeshita' },
            { casual: 'neru', english: 'sleep', masu: 'nemasu', masen: 'nemasen', mashita: 'nemashita', masenDeshita: 'nemasen deshita' },
            { casual: 'nomu', english: 'drink', masu: 'nomimasu', masen: 'nomimasen', mashita: 'nomimashita', masenDeshita: 'nomimasendeshita' },
            { casual: 'iku', english: 'go', masu: 'ikimasu', masen: 'ikimasen', mashita: 'ikimashita', masenDeshita: 'ikimasen deshita' },
            { casual: 'kimasu', english: 'come', masu: 'kimasu', masen: 'kimasen', mashita: 'kimashita', masenDeshita: 'kimasen deshita' },
            { casual: 'yasumimasu', english: 'take rest', masu: 'yasumimasu', masen: 'yasumimasen', mashita: 'yasumimashita', masenDeshita: 'yasumimasen deshita' },
            { casual: 'kaerimasu', english: 'return', masu: 'kaerimasu', masen: 'kaerimasen', mashita: 'kaerimashita', masenDeshita: 'kaerimasen deshita' },
            { casual: 'kaimasu', english: 'buy', masu: 'kaimasu', masen: 'kaimasen', mashita: 'kaimashita', masenDeshita: 'kaimasen deshita' },
            { casual: 'kakimasu', english: 'write', masu: 'kakimasu', masen: 'kakimasen', mashita: 'kakimashita', masenDeshita: 'kakimasen deshita' },
            { casual: 'shimasu', english: 'do', masu: 'shimasu', masen: 'shimasen', mashita: 'shimashita', masenDeshita: 'shimasen deshita' },
            { casual: 'mimasu', english: 'see', masu: 'mimasu', masen: 'mimasen', mashita: 'mimashita', masenDeshita: 'mimasen deshita' },
            { casual: 'wakarimasu', english: 'understand', masu: 'wakarimasu', masen: 'wakarimasen', mashita: 'wakarimashita', masenDeshita: 'wakarimasen deshita' }
        ].map(v => ({ ...v, casual: v.casual.endsWith('masu') ? v.casual.slice(0, -4) : v.casual })); // Normalize casual form for verbs ending in masu

        // Existence Data
        const existenceExercises = [
            { sentence: 'There is a university => daigaku ga ____', correct: 'arimasu', type: 'non-living' },
            { sentence: 'There was no flower => hana ga ____', correct: 'arimasen deshita', type: 'non-living' },
            { sentence: 'There was a shop => mise ga ____', correct: 'arimashita', type: 'non-living' },
            { sentence: 'There is a cat => neko ga ____', correct: 'imasu', type: 'living' },
            { sentence: 'There was no dog => inu ga ____', correct: 'imasen deshita', type: 'living' },
            { sentence: 'There is no Kimura => Kimura san ga ____', correct: 'imasen', type: 'living' }
        ];

        // Demonstratives Data
        const demonstrativesExercises = [
            { sentence: '____ wa kagi desu. (This is key)', correct: 'kore' },
            { sentence: '____ wa kaban desu. (It is a bag)', correct: 'sore' },
            { sentence: '____ hito wa Miira desu. (This person is Meera)', correct: 'kono' },
            { sentence: '____ hito wa Ken desu. (That person is Ken)', correct: 'ano' },
            { sentence: '____ nooto wa dare no desu ka? (Whose notebook is that?)', correct: 'ano' },
            { sentence: '____ kasa wa Rei san no desu. (This umbrella belongs to Ms. Rei)', correct: 'kono' }
        ];

        // Kanji Numbers Data
        const kanjiNumbersExercises = [
            { number: 2007, japanese: 'ni sen nana' },
            { number: 145, japanese: 'hyaku yon juu go' },
            { number: 65, japanese: 'roku juu go' },
            { number: 99, japanese: 'kyuu juu kyuu' },
            { number: 25, japanese: 'ni juu go' },
            { number: 160, japanese: 'hyaku roku juu' },
            { number: 1286, japanese: 'sen ni hyaku hachi juu roku' },
            { number: 2006, japanese: 'ni sen roku' }
        ];

        // Weekly Days Data (for quiz)
        const weeklyDaysData = [
            { japanese: '月曜日', english: 'monday' },
            { japanese: '火曜日', english: 'tuesday' },
            { japanese: '水曜日', english: 'wednesday' },
            { japanese: '木曜日', english: 'thursday' },
            { japanese: '金曜日', english: 'friday' },
            { japanese: '土曜日', english: 'saturday' },
            { japanese: '日曜日', english: 'sunday' }
        ];

        // Monthly Days Data (for table)
        const monthlyDaysData = [
            { date: '1st', romaji: 'tsuitachi' }, { date: '2nd', romaji: 'futsuka' }, { date: '3rd', romaji: 'mikka' },
            { date: '4th', romaji: 'yokka' }, { date: '5th', romaji: 'itsuka' }, { date: '6th', romaji: 'muika' },
            { date: '7th', romaji: 'nanoka' }, { date: '8th', romaji: 'youka' }, { date: '9th', romaji: 'kokonoka' },
            { date: '10th', romaji: 'tooka' }, { date: '11th', romaji: 'juuichinichi' }, { date: '12th', romaji: 'juuninichi' },
            { date: '13th', romaji: 'juusannichi' }, { date: '14th', romaji: 'juuyokka' }, { date: '15th', romaji: 'juugonichi' },
            { date: '16th', romaji: 'juurokunichi' }, { date: '17th', romaji: 'juushichinichi' }, { date: '18th', romaji: 'juuhachinichi' },
            { date: '19th', romaji: 'juukunichi' }, { date: '20th', romaji: 'hatsuka' }, { date: '21st', romaji: 'nijuuichinichi' },
            { date: '22nd', romaji: 'nijuuninichi' }, { date: '23rd', romaji: 'nijuusannichi' }, { date: '24th', romaji: 'nijuuyokka' },
            { date: '25th', romaji: 'nijuugonichi' }, { date: '26th', romaji: 'nijuurokunichi' }, { date: '27th', romaji: 'nijuushichinichi' },
            { date: '28th', romaji: 'nijuuhachinichi' }, { date: '29th', romaji: 'nijuukunichi' }, { date: '30th', romaji: 'sanjuunichi' },
            { date: '31st', romaji: 'sanjuuichinichi' }
        ];

        // Date Conversion Data (for quiz)
        const dateConversionExercises = [
            { question: '2007-09-14', japanese: 'ni sen nana nen - ku gatsu - juuyokka' },
            { question: '2006-10-01', japanese: 'ni sen roku nen - juu gatsu - tsuitachi' },
            { question: '2007-02-04', japanese: 'ni sen nana nen - ni gatsu - yokka' },
            { question: '2025-06-18', japanese: 'ni sen ni juu go nen - roku gatsu - juuhachinichi' }
        ];

        // Particles Data
        const particleExercises = [
            { sentence: 'Kimura san ( ) sensei desu. (Mr. Kimura is also a teacher.)', correct: 'mo' },
            { sentence: 'Yuki san ( ) gakusei desu ( )? (Is Ms. Yuki a student?)', correct: 'wa,ka' },
            { sentence: 'Sore ( ) Manish san ( ) kaban desu. (That is Mr. Manish\'s bag.)', correct: 'wa,no' },
            { sentence: 'Yoru ( ) hachi ji ( ) juu jihan ( ) benkyou shimasu. (In the evening, I study from 8 to 10:30.)', correct: 'ni,kara,made' },
            { sentence: 'Suzuki san ( ) densha ( ) gakkou ( ) ikimasu. (Mr. Suzuki will go to school by train.)', correct: 'wa,de,e' }, // 'e' or 'ni' are both correct for direction
            { sentence: 'Watashi ( ) koohii ( ) suki desu. (I like coffee.)', correct: 'wa,ga' },
            { sentence: 'Watashi ( ) tomodachi ( ) nihon ( ) ikimashita. (I went to Japan with my friend.)', correct: 'wa,to,e' }, // 'e' or 'ni' are both correct for direction
            { sentence: 'Shaan san wa onigiri ( ) sukidesu. (Mr. Shaan likes onigiri.)', correct: 'ga' },
            { sentence: 'Kono saifu wa watashi ( ) desu. (This purse is mine.)', correct: 'no' },
            { sentence: 'Tomodachi no ie ( ) ikimashita. (I went to my friend\'s house.)', correct: 'e' } // 'e' or 'ni' are both correct for direction
        ];

        // Hiragana to Romaji Data
        const hiraganaRomajiExercises = [
            { hiragana: 'ねこ', romaji: 'neko' },
            { hiragana: 'いぬ', romaji: 'inu' },
            { hiragana: 'みず', romaji: 'mizu' },
            { hiragana: 'がっこう', romaji: 'gakkou' },
            { hiragana: 'きょうし', romaji: 'kyoushi' },
            { hiragana: 'でんしゃ', romaji: 'densha' },
            { hiragana: 'りょこう', romaji: 'ryokou' },
            { hiragana: 'りゅうがくせい', romaji: 'ryuugakusei' },
            { hiragana: 'びょういん', romaji: 'byouin' },
            { hiragana: 'コーヒー', romaji: 'koohii' }
        ];


        document.addEventListener('DOMContentLoaded', () => {
            // Setup Quiz sections
            setupQuiz(greetingsData, 'greeting-question', 'greeting-answer', 'greeting-feedback', 'check-greeting-btn', 'next-greeting-btn', 'greeting-progress', 'japanese-to-english');
            setupQuiz(adjectivesData, 'adjective-question', 'adjective-answer', 'adjective-feedback', 'check-adjective-btn', 'next-adjective-btn', 'adjective-progress', 'japanese-to-english');
            setupQuiz(bodyPartsData, 'bodypart-question', 'bodypart-answer', 'bodypart-feedback', 'check-bodypart-btn', 'next-bodypart-btn', 'bodypart-progress', 'japanese-to-english');
            setupQuiz(colorsData, 'color-question', 'color-answer', 'color-feedback', 'check-color-btn', 'next-color-btn', 'color-progress', 'japanese-to-english');
            setupQuiz(familyData, 'family-question', 'family-answer', 'family-feedback', 'check-family-btn', 'next-family-btn', 'family-progress', 'japanese-to-english');
            setupQuiz(dailyExpressionsData, 'expression-question', 'expression-answer', 'expression-feedback', 'check-expression-btn', 'next-expression-btn', 'expression-progress', 'japanese-to-english');
            setupQuiz(foodData, 'food-question', 'food-answer', 'food-feedback', 'check-food-btn', 'next-food-btn', 'food-progress', 'japanese-to-english');
            setupQuiz(vocabularyData, 'vocabulary-question', 'vocabulary-answer', 'vocabulary-feedback', 'check-vocabulary-btn', 'next-vocabulary-btn', 'vocabulary-progress', 'japanese-to-english');

            // --- Verb Conjugation Logic ---
            let currentVerbIndex = 0;
            const shuffledVerbs = shuffleArray([...verbsData]);
            const currentCasualVerbEl = document.getElementById('current-casual-verb');
            const verbMasuInput = document.getElementById('verb-masu');
            const verbMasenInput = document.getElementById('verb-masen');
            const verbMashitaInput = document.getElementById('verb-mashita');
            const verbMasenDeshitaInput = document.getElementById('verb-masen-deshita');
            const conjugationFeedbackEl = document.getElementById('conjugation-feedback');
            const checkConjugationBtn = document.getElementById('check-conjugation-btn');
            const nextConjugationBtn = document.getElementById('next-conjugation-btn');
            const verbListEl = document.getElementById('verb-list');
            const conjugationProgressEl = document.getElementById('conjugation-progress');


            // Populate verb list
            verbsData.forEach(verb => {
                const li = document.createElement('li');
                li.textContent = `${verb.casual} (To ${verb.english})`;
                verbListEl.appendChild(li);
            });

            function updateConjugationProgress() {
                conjugationProgressEl.textContent = `Question ${currentVerbIndex + 1} of ${shuffledVerbs.length}`;
            }

            function displayConjugationExercise() {
                const verb = shuffledVerbs[currentVerbIndex];
                currentCasualVerbEl.textContent = verb.casual;
                verbMasuInput.value = '';
                verbMasenInput.value = '';
                verbMashitaInput.value = '';
                verbMasenDeshitaInput.value = '';
                conjugationFeedbackEl.textContent = '';
                conjugationFeedbackEl.classList.remove('correct', 'incorrect');
                updateConjugationProgress();
            }

            checkConjugationBtn.addEventListener('click', () => {
                const verb = shuffledVerbs[currentVerbIndex];
                let allCorrect = true;
                let feedbackText = '';

                if (verbMasuInput.value.toLowerCase().trim() !== verb.masu.toLowerCase()) {
                    allCorrect = false;
                    feedbackText += `Present (masu): Incorrect. Correct is "${verb.masu}".\n`;
                }
                if (verbMasenInput.value.toLowerCase().trim() !== verb.masen.toLowerCase()) {
                    allCorrect = false;
                    feedbackText += `Present Negative (masen): Incorrect. Correct is "${verb.masen}".\n`;
                }
                if (verbMashitaInput.value.toLowerCase().trim() !== verb.mashita.toLowerCase()) {
                    allCorrect = false;
                    feedbackText += `Past (mashita): Incorrect. Correct is "${verb.mashita}".\n`;
                }
                if (verbMasenDeshitaInput.value.toLowerCase().trim() !== verb.masenDeshita.toLowerCase()) {
                    allCorrect = false;
                    feedbackText += `Past Negative (masen deshita): Incorrect. Correct is "${verb.masenDeshita}".\n`;
                }

                if (allCorrect) {
                    conjugationFeedbackEl.innerHTML = '<i class="fas fa-check-circle"></i> All correct!';
                    conjugationFeedbackEl.classList.remove('incorrect');
                    conjugationFeedbackEl.classList.add('correct');
                    score++;
                    scoreDisplay.textContent = score;
                } else {
                    conjugationFeedbackEl.innerHTML = `<i class="fas fa-times-circle"></i> Some answers are incorrect.\n${feedbackText}`;
                    conjugationFeedbackEl.classList.remove('correct');
                    conjugationFeedbackEl.classList.add('incorrect');
                }
            });

            nextConjugationBtn.addEventListener('click', () => {
                currentVerbIndex = (currentVerbIndex + 1) % shuffledVerbs.length;
                displayConjugationExercise();
            });

            displayConjugationExercise(); // Initial display

            // --- Existence Logic ---
            let currentExistenceIndex = 0;
            const shuffledExistence = shuffleArray([...existenceExercises]);
            const existenceSentenceEl = document.getElementById('existence-sentence');
            const existenceAnswerEl = document.getElementById('existence-answer');
            const existenceFeedbackEl = document.getElementById('existence-feedback');
            const checkExistenceBtn = document.getElementById('check-existence-btn');
            const nextExistenceBtn = document.getElementById('next-existence-btn');
            const existenceProgressEl = document.getElementById('existence-progress');

            function updateExistenceProgress() {
                existenceProgressEl.textContent = `Question ${currentExistenceIndex + 1} of ${shuffledExistence.length}`;
            }

            function displayExistenceExercise() {
                const exercise = shuffledExistence[currentExistenceIndex];
                existenceSentenceEl.textContent = exercise.sentence;
                existenceAnswerEl.value = '';
                existenceFeedbackEl.textContent = '';
                existenceFeedbackEl.classList.remove('correct', 'incorrect');
                updateExistenceProgress();
            }

            checkExistenceBtn.addEventListener('click', () => {
                const exercise = shuffledExistence[currentExistenceIndex];
                if (existenceAnswerEl.value.toLowerCase().trim() === exercise.correct.toLowerCase()) {
                    existenceFeedbackEl.innerHTML = '<i class="fas fa-check-circle"></i> Correct!';
                    existenceFeedbackEl.classList.remove('incorrect');
                    existenceFeedbackEl.classList.add('correct');
                    score++;
                    scoreDisplay.textContent = score;
                } else {
                    existenceFeedbackEl.innerHTML = `<i class="fas fa-times-circle"></i> Incorrect. Correct is "${exercise.correct}".`;
                    existenceFeedbackEl.classList.remove('correct');
                    existenceFeedbackEl.classList.add('incorrect');
                }
            });

            nextExistenceBtn.addEventListener('click', () => {
                currentExistenceIndex = (currentExistenceIndex + 1) % shuffledExistence.length;
                displayExistenceExercise();
            });

            displayExistenceExercise(); // Initial display

            // --- Demonstratives Logic ---
            setupQuiz(demonstrativesExercises, 'demonstrative-sentence', 'demonstrative-input', 'demonstrative-feedback', 'check-demonstrative-btn', 'next-demonstrative-btn', 'demonstrative-progress', 'japanese-to-english');


            // --- Kanji Numbers Logic ---
            setupQuiz(kanjiNumbersExercises, 'number-to-convert', 'kanji-number-input', 'kanji-number-feedback', 'check-kanji-number-btn', 'next-kanji-number-btn', 'kanji-number-progress', 'number-to-japanese');

            // --- Weekly Days Quiz ---
            setupQuiz(weeklyDaysData, 'weekly-day-question', 'weekly-day-answer', 'weekly-day-feedback', 'check-weekly-day-btn', 'next-weekly-day-btn', 'weekly-day-progress', 'japanese-to-english');

            // --- Monthly Days Table Population ---
            const monthlyDaysTableBody = document.getElementById('monthly-days-table-body');
            monthlyDaysData.forEach(day => {
                const row = document.createElement('tr');
                row.classList.add('hover:bg-gray-50');
                row.innerHTML = `
                    <td class="py-2 px-4 border-b">${day.date}</td>
                    <td class="py-2 px-4 border-b">${day.romaji}</td>
                `;
                monthlyDaysTableBody.appendChild(row);
            });

            // --- Date Conversion Quiz ---
            setupQuiz(dateConversionExercises, 'date-conversion-question', 'date-conversion-answer', 'date-conversion-feedback', 'check-date-conversion-btn', 'next-date-conversion-btn', 'date-conversion-progress', 'date-to-japanese');


            // --- Particles Logic ---
            setupQuiz(particleExercises, 'particle-sentence', 'particle-input', 'particle-feedback', 'check-particle-btn', 'next-particle-btn', 'particle-progress', 'fill-in-the-blank');

            // --- Hiragana to Romaji Logic ---
            setupQuiz(hiraganaRomajiExercises, 'hiragana-word', 'romaji-input', 'romaji-feedback', 'check-romaji-btn', 'next-romaji-btn', 'hiragana-progress', 'hiragana-to-romaji');
        });
    </script>
</body>
</html>
